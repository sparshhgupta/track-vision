{"ast":null,"code":"\"use strict\";\n\nvar __create = Object.create;\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __getProtoOf = Object.getPrototypeOf;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __export = (target, all) => {\n  for (var name in all) __defProp(target, name, {\n    get: all[name],\n    enumerable: true\n  });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from)) if (!__hasOwnProp.call(to, key) && key !== except) __defProp(to, key, {\n      get: () => from[key],\n      enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable\n    });\n  }\n  return to;\n};\nvar __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(\n// If the importer is in node compatibility mode or this is not an ESM\n// file that has been converted to a CommonJS file using a Babel-\n// compatible transform (i.e. \"__esModule\" has not been set), then set\n// \"default\" to the CommonJS \"module.exports\" for node compatibility.\nisNodeMode || !mod || !mod.__esModule ? __defProp(target, \"default\", {\n  value: mod,\n  enumerable: true\n}) : target, mod));\nvar __toCommonJS = mod => __copyProps(__defProp({}, \"__esModule\", {\n  value: true\n}), mod);\n\n// src/index.ts\nvar index_exports = {};\n__export(index_exports, {\n  default: () => treeChanges\n});\nmodule.exports = __toCommonJS(index_exports);\nvar import_deep_equal2 = __toESM(require(\"@gilbarbara/deep-equal\"));\nvar import_is_lite2 = __toESM(require(\"is-lite\"));\n\n// src/helpers.ts\nvar import_deep_equal = __toESM(require(\"@gilbarbara/deep-equal\"));\nvar import_is_lite = __toESM(require(\"is-lite\"));\nfunction canHaveLength(...arguments_) {\n  return arguments_.every(d => import_is_lite.default.string(d) || import_is_lite.default.array(d) || import_is_lite.default.plainObject(d));\n}\nfunction checkEquality(left, right, value) {\n  if (!isSameType(left, right)) {\n    return false;\n  }\n  if ([left, right].every(import_is_lite.default.array)) {\n    return !left.some(hasValue(value)) && right.some(hasValue(value));\n  }\n  if ([left, right].every(import_is_lite.default.plainObject)) {\n    return !Object.entries(left).some(hasEntry(value)) && Object.entries(right).some(hasEntry(value));\n  }\n  return right === value;\n}\nfunction compareNumbers(previousData, data, options) {\n  const {\n    actual,\n    key,\n    previous,\n    type\n  } = options;\n  const left = nested(previousData, key);\n  const right = nested(data, key);\n  let changed = [left, right].every(import_is_lite.default.number) && (type === \"increased\" ? left < right : left > right);\n  if (!import_is_lite.default.undefined(actual)) {\n    changed = changed && right === actual;\n  }\n  if (!import_is_lite.default.undefined(previous)) {\n    changed = changed && left === previous;\n  }\n  return changed;\n}\nfunction compareValues(previousData, data, options) {\n  const {\n    key,\n    type,\n    value\n  } = options;\n  const left = nested(previousData, key);\n  const right = nested(data, key);\n  const primary = type === \"added\" ? left : right;\n  const secondary = type === \"added\" ? right : left;\n  if (!import_is_lite.default.nullOrUndefined(value)) {\n    if (import_is_lite.default.defined(primary)) {\n      if (import_is_lite.default.array(primary) || import_is_lite.default.plainObject(primary)) {\n        return checkEquality(primary, secondary, value);\n      }\n    } else {\n      return (0, import_deep_equal.default)(secondary, value);\n    }\n    return false;\n  }\n  if ([left, right].every(import_is_lite.default.array)) {\n    return !secondary.every(isEqualPredicate(primary));\n  }\n  if ([left, right].every(import_is_lite.default.plainObject)) {\n    return hasExtraKeys(Object.keys(primary), Object.keys(secondary));\n  }\n  return ![left, right].every(d => import_is_lite.default.primitive(d) && import_is_lite.default.defined(d)) && (type === \"added\" ? !import_is_lite.default.defined(left) && import_is_lite.default.defined(right) : import_is_lite.default.defined(left) && !import_is_lite.default.defined(right));\n}\nfunction getIterables(previousData, data, {\n  key\n} = {}) {\n  let left = nested(previousData, key);\n  let right = nested(data, key);\n  if (!isSameType(left, right)) {\n    throw new TypeError(\"Inputs have different types\");\n  }\n  if (!canHaveLength(left, right)) {\n    throw new TypeError(\"Inputs don't have length\");\n  }\n  if ([left, right].every(import_is_lite.default.plainObject)) {\n    left = Object.keys(left);\n    right = Object.keys(right);\n  }\n  return [left, right];\n}\nfunction hasEntry(input) {\n  return ([key, value]) => {\n    if (import_is_lite.default.array(input)) {\n      return (0, import_deep_equal.default)(input, value) || input.some(d => (0, import_deep_equal.default)(d, value) || import_is_lite.default.array(value) && isEqualPredicate(value)(d));\n    }\n    if (import_is_lite.default.plainObject(input) && input[key]) {\n      return !!input[key] && (0, import_deep_equal.default)(input[key], value);\n    }\n    return (0, import_deep_equal.default)(input, value);\n  };\n}\nfunction hasExtraKeys(left, right) {\n  return right.some(d => !left.includes(d));\n}\nfunction hasValue(input) {\n  return value => {\n    if (import_is_lite.default.array(input)) {\n      return input.some(d => (0, import_deep_equal.default)(d, value) || import_is_lite.default.array(value) && isEqualPredicate(value)(d));\n    }\n    return (0, import_deep_equal.default)(input, value);\n  };\n}\nfunction includesOrEqualsTo(previousValue, value) {\n  return import_is_lite.default.array(previousValue) ? previousValue.some(d => (0, import_deep_equal.default)(d, value)) : (0, import_deep_equal.default)(previousValue, value);\n}\nfunction isEqualPredicate(data) {\n  return value => data.some(d => (0, import_deep_equal.default)(d, value));\n}\nfunction isSameType(...arguments_) {\n  return arguments_.every(import_is_lite.default.array) || arguments_.every(import_is_lite.default.number) || arguments_.every(import_is_lite.default.plainObject) || arguments_.every(import_is_lite.default.string);\n}\nfunction nested(data, property) {\n  if (import_is_lite.default.plainObject(data) || import_is_lite.default.array(data)) {\n    if (import_is_lite.default.string(property)) {\n      const props = property.split(\".\");\n      return props.reduce((acc, d) => acc && acc[d], data);\n    }\n    if (import_is_lite.default.number(property)) {\n      return data[property];\n    }\n    return data;\n  }\n  return data;\n}\n\n// src/index.ts\nfunction treeChanges(previousData, data) {\n  if ([previousData, data].some(import_is_lite2.default.nullOrUndefined)) {\n    throw new Error(\"Missing required parameters\");\n  }\n  if (![previousData, data].every(d => import_is_lite2.default.plainObject(d) || import_is_lite2.default.array(d))) {\n    throw new Error(\"Expected plain objects or array\");\n  }\n  const added = (key, value) => {\n    try {\n      return compareValues(previousData, data, {\n        key,\n        type: \"added\",\n        value\n      });\n    } catch {\n      return false;\n    }\n  };\n  const changed = (key, actual, previous) => {\n    try {\n      const left = nested(previousData, key);\n      const right = nested(data, key);\n      const hasActual = import_is_lite2.default.defined(actual);\n      const hasPrevious = import_is_lite2.default.defined(previous);\n      if (hasActual || hasPrevious) {\n        const leftComparator = hasPrevious ? includesOrEqualsTo(previous, left) : !includesOrEqualsTo(actual, left);\n        const rightComparator = includesOrEqualsTo(actual, right);\n        return leftComparator && rightComparator;\n      }\n      if ([left, right].every(import_is_lite2.default.array) || [left, right].every(import_is_lite2.default.plainObject)) {\n        return !(0, import_deep_equal2.default)(left, right);\n      }\n      return left !== right;\n    } catch {\n      return false;\n    }\n  };\n  const changedFrom = (key, previous, actual) => {\n    if (!import_is_lite2.default.defined(key)) {\n      return false;\n    }\n    try {\n      const left = nested(previousData, key);\n      const right = nested(data, key);\n      const hasActual = import_is_lite2.default.defined(actual);\n      return includesOrEqualsTo(previous, left) && (hasActual ? includesOrEqualsTo(actual, right) : !hasActual);\n    } catch {\n      return false;\n    }\n  };\n  const decreased = (key, actual, previous) => {\n    if (!import_is_lite2.default.defined(key)) {\n      return false;\n    }\n    try {\n      return compareNumbers(previousData, data, {\n        key,\n        actual,\n        previous,\n        type: \"decreased\"\n      });\n    } catch {\n      return false;\n    }\n  };\n  const emptied = key => {\n    try {\n      const [left, right] = getIterables(previousData, data, {\n        key\n      });\n      return !!left.length && !right.length;\n    } catch {\n      return false;\n    }\n  };\n  const filled = key => {\n    try {\n      const [left, right] = getIterables(previousData, data, {\n        key\n      });\n      return !left.length && !!right.length;\n    } catch {\n      return false;\n    }\n  };\n  const increased = (key, actual, previous) => {\n    if (!import_is_lite2.default.defined(key)) {\n      return false;\n    }\n    try {\n      return compareNumbers(previousData, data, {\n        key,\n        actual,\n        previous,\n        type: \"increased\"\n      });\n    } catch {\n      return false;\n    }\n  };\n  const removed = (key, value) => {\n    try {\n      return compareValues(previousData, data, {\n        key,\n        type: \"removed\",\n        value\n      });\n    } catch {\n      return false;\n    }\n  };\n  return {\n    added,\n    changed,\n    changedFrom,\n    decreased,\n    emptied,\n    filled,\n    increased,\n    removed\n  };\n}\n\n// fix-cjs-exports\nif (module.exports.default) {\n  Object.assign(module.exports.default, module.exports);\n  module.exports = module.exports.default;\n  delete module.exports.default;\n}","map":{"version":3,"names":["index_exports","__export","default","treeChanges","module","exports","__toCommonJS","import_deep_equal2","__toESM","require","import_is_lite2","import_deep_equal","import_is_lite","canHaveLength","arguments_","every","d","string","array","plainObject","checkEquality","left","right","value","isSameType","some","hasValue","Object","entries","hasEntry","compareNumbers","previousData","data","options","actual","key","previous","type","nested","changed","number","undefined","compareValues","primary","secondary","nullOrUndefined","defined","isEqualPredicate","hasExtraKeys","keys","primitive","getIterables","TypeError","input","includes","includesOrEqualsTo","previousValue","property","props","split","reduce","acc","Error","added","hasActual","hasPrevious","leftComparator","rightComparator","changedFrom","decreased","emptied","length","filled","increased","removed"],"sources":["../src/index.ts","../src/helpers.ts"],"sourcesContent":["import equal from '@gilbarbara/deep-equal';\nimport is from 'is-lite';\n\nimport { compareNumbers, compareValues, getIterables, includesOrEqualsTo, nested } from './helpers';\nimport { Data, KeyType, TreeChanges, Value } from './types';\n\nexport default function treeChanges<P extends Data, D extends Data, K = KeyType<P, D>>(\n  previousData: P,\n  data: D,\n): TreeChanges<K> {\n  if ([previousData, data].some(is.nullOrUndefined)) {\n    throw new Error('Missing required parameters');\n  }\n\n  if (![previousData, data].every(d => is.plainObject(d) || is.array(d))) {\n    throw new Error('Expected plain objects or array');\n  }\n\n  const added = (key?: K, value?: Value): boolean => {\n    try {\n      return compareValues<K>(previousData, data, { key, type: 'added', value });\n    } catch {\n      /* istanbul ignore next */\n      return false;\n    }\n  };\n\n  const changed = (key?: K | string, actual?: Value, previous?: Value): boolean => {\n    try {\n      const left = nested(previousData, key);\n      const right = nested(data, key);\n      const hasActual = is.defined(actual);\n      const hasPrevious = is.defined(previous);\n\n      if (hasActual || hasPrevious) {\n        const leftComparator = hasPrevious\n          ? includesOrEqualsTo(previous, left)\n          : !includesOrEqualsTo(actual, left);\n        const rightComparator = includesOrEqualsTo(actual, right);\n\n        return leftComparator && rightComparator;\n      }\n\n      if ([left, right].every(is.array) || [left, right].every(is.plainObject)) {\n        return !equal(left, right);\n      }\n\n      return left !== right;\n    } catch {\n      /* istanbul ignore next */\n      return false;\n    }\n  };\n\n  const changedFrom = (key: K | string, previous: Value, actual?: Value): boolean => {\n    if (!is.defined(key)) {\n      return false;\n    }\n\n    try {\n      const left = nested(previousData, key);\n      const right = nested(data, key);\n      const hasActual = is.defined(actual);\n\n      return (\n        includesOrEqualsTo(previous, left) &&\n        (hasActual ? includesOrEqualsTo(actual, right) : !hasActual)\n      );\n    } catch {\n      /* istanbul ignore next */\n      return false;\n    }\n  };\n\n  const decreased = (key: K, actual?: Value, previous?: Value): boolean => {\n    if (!is.defined(key)) {\n      return false;\n    }\n\n    try {\n      return compareNumbers<K>(previousData, data, { key, actual, previous, type: 'decreased' });\n    } catch {\n      /* istanbul ignore next */\n      return false;\n    }\n  };\n\n  const emptied = (key?: K): boolean => {\n    try {\n      const [left, right] = getIterables(previousData, data, { key });\n\n      return !!left.length && !right.length;\n    } catch {\n      /* istanbul ignore next */\n      return false;\n    }\n  };\n\n  const filled = (key?: K): boolean => {\n    try {\n      const [left, right] = getIterables(previousData, data, { key });\n\n      return !left.length && !!right.length;\n    } catch {\n      /* istanbul ignore next */\n      return false;\n    }\n  };\n\n  const increased = (key: K, actual?: Value, previous?: Value): boolean => {\n    if (!is.defined(key)) {\n      return false;\n    }\n\n    try {\n      return compareNumbers<K>(previousData, data, { key, actual, previous, type: 'increased' });\n    } catch {\n      /* istanbul ignore next */\n      return false;\n    }\n  };\n\n  const removed = (key?: K, value?: Value): boolean => {\n    try {\n      return compareValues<K>(previousData, data, { key, type: 'removed', value });\n    } catch {\n      /* istanbul ignore next */\n      return false;\n    }\n  };\n\n  return { added, changed, changedFrom, decreased, emptied, filled, increased, removed };\n}\n\nexport type { Data, KeyType, TreeChanges, Value } from './types';\n","import equal from '@gilbarbara/deep-equal';\nimport is from 'is-lite';\n\nimport { CompareValuesOptions, Data, Key, Options, ValidTypes, Value } from './types';\n\nexport function canHaveLength(...arguments_: any): boolean {\n  return arguments_.every((d: unknown) => is.string(d) || is.array(d) || is.plainObject(d));\n}\n\nexport function checkEquality(left: Data, right: Data, value: Value) {\n  if (!isSameType(left, right)) {\n    return false;\n  }\n\n  if ([left, right].every(is.array)) {\n    return !left.some(hasValue(value)) && right.some(hasValue(value));\n  }\n\n  /* istanbul ignore else */\n  if ([left, right].every(is.plainObject)) {\n    return (\n      !Object.entries(left).some(hasEntry(value)) && Object.entries(right).some(hasEntry(value))\n    );\n  }\n\n  return right === value;\n}\n\nexport function compareNumbers<K = Key>(\n  previousData: Data,\n  data: Data,\n  options: Options<K>,\n): boolean {\n  const { actual, key, previous, type } = options;\n  const left = nested(previousData, key);\n  const right = nested(data, key);\n\n  let changed =\n    [left, right].every(is.number) && (type === 'increased' ? left < right : left > right);\n\n  if (!is.undefined(actual)) {\n    changed = changed && right === actual;\n  }\n\n  if (!is.undefined(previous)) {\n    changed = changed && left === previous;\n  }\n\n  return changed;\n}\n\nexport function compareValues<K = Key>(\n  previousData: Data,\n  data: Data,\n  options: CompareValuesOptions<K>,\n) {\n  const { key, type, value } = options;\n\n  const left = nested(previousData, key);\n  const right = nested(data, key);\n  const primary = type === 'added' ? left : right;\n  const secondary = type === 'added' ? right : left;\n\n  if (!is.nullOrUndefined(value)) {\n    if (is.defined(primary)) {\n      // check if nested data matches\n      if (is.array(primary) || is.plainObject(primary)) {\n        return checkEquality(primary, secondary, value);\n      }\n    } else {\n      return equal(secondary, value);\n    }\n\n    return false;\n  }\n\n  if ([left, right].every(is.array)) {\n    return !secondary.every(isEqualPredicate(primary));\n  }\n\n  if ([left, right].every(is.plainObject)) {\n    return hasExtraKeys(Object.keys(primary), Object.keys(secondary));\n  }\n\n  return (\n    ![left, right].every(d => is.primitive(d) && is.defined(d)) &&\n    (type === 'added'\n      ? !is.defined(left) && is.defined(right)\n      : is.defined(left) && !is.defined(right))\n  );\n}\n\nexport function getIterables<K = Key>(previousData: Data, data: Data, { key }: Options<K> = {}) {\n  let left = nested(previousData, key);\n  let right = nested(data, key);\n\n  if (!isSameType(left, right)) {\n    throw new TypeError('Inputs have different types');\n  }\n\n  if (!canHaveLength(left, right)) {\n    throw new TypeError(\"Inputs don't have length\");\n  }\n\n  if ([left, right].every(is.plainObject)) {\n    left = Object.keys(left);\n    right = Object.keys(right);\n  }\n\n  return [left, right];\n}\n\nexport function hasEntry(input: Value) {\n  return ([key, value]: [string, Value]) => {\n    if (is.array(input)) {\n      return (\n        equal(input, value) ||\n        input.some(d => equal(d, value) || (is.array(value) && isEqualPredicate(value)(d)))\n      );\n    }\n\n    /* istanbul ignore else */\n    if (is.plainObject(input) && input[key]) {\n      return !!input[key] && equal(input[key], value);\n    }\n\n    return equal(input, value);\n  };\n}\n\nexport function hasExtraKeys(left: string[], right: string[]): boolean {\n  return right.some(d => !left.includes(d));\n}\n\nexport function hasValue(input: Value) {\n  return (value: Value) => {\n    if (is.array(input)) {\n      return input.some(d => equal(d, value) || (is.array(value) && isEqualPredicate(value)(d)));\n    }\n\n    return equal(input, value);\n  };\n}\n\nexport function includesOrEqualsTo<T>(previousValue: T | T[], value: T): boolean {\n  return is.array(previousValue)\n    ? previousValue.some(d => equal(d, value))\n    : equal(previousValue, value);\n}\n\nexport function isEqualPredicate(data: unknown[]) {\n  return (value: unknown) => data.some(d => equal(d, value));\n}\n\nexport function isSameType(...arguments_: ValidTypes[]): boolean {\n  return (\n    arguments_.every(is.array) ||\n    arguments_.every(is.number) ||\n    arguments_.every(is.plainObject) ||\n    arguments_.every(is.string)\n  );\n}\n\nexport function nested<T extends Data, K = Key>(data: T, property?: K) {\n  /* istanbul ignore else */\n  if (is.plainObject(data) || is.array(data)) {\n    /* istanbul ignore else */\n    if (is.string(property)) {\n      const props: Array<any> = property.split('.');\n\n      return props.reduce((acc, d) => acc && acc[d], data);\n    }\n\n    /* istanbul ignore else */\n    if (is.number(property)) {\n      return data[property];\n    }\n\n    return data;\n  }\n\n  return data;\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script"}